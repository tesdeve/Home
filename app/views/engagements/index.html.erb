<h1 class='mb-5'>Permisos en <%= @building.buildingtype.titleize %> <%= @building.name.titleize %></h1>

<div class="my-5">
  <%= link_to 'New Engagement', new_building_engagement_path(@building) %>
</div>

<div class="table table-responsive"> 
  <div class="indextable">
    <table class="table table-hover">  
      <thead>
        <tr>
          <th> Creador de Asociación </th>
          <th> Ultimo editor de Asociación </th>
          <th> Usuario Asociado </th>
          <th> Acceso </th>
          <th> Cargo </th>
          <th> Creado el </th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>
        <% @engagements.each do |engagement| %>
          <tr>
            <td><%= engagement.creator.present?  ? User.find(engagement.creator).email.titleize : "Console" %></td>
              <td><%= engagement.edited_by.present?  ? User.find(engagement.edited_by).email.titleize : "No Editado" %></td>
            
            <td><%= engagement.user.email.titleize %></td>
            <td><%= engagement.access.titleize %></td>
            <td><%= engagement.role.titleize  %></td>
            <td><%= engagement.started_at.strftime('%d %b %Y %H:%M:%S') %></td>
            <td><%= link_to 'Show', [@building, engagement] %></td>
            <td><%= link_to 'Edit', edit_building_engagement_path(@building, engagement) %></td>
            <td><%= link_to 'Destroy', [@building, engagement], method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="my-5"> 
  <%= link_to 'New Engagement', new_building_engagement_path(@building) %> | 
  <%= link_to "#{@building.name}", building_path(@building) %>
</div>