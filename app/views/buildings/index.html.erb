<h1 class='mb-5'>Entes Residenciales</h1>
<br>
<br>
<%= link_to 'Crear Ente Residencial', new_building_path %>
<br>
<br>
<div class="table table-responsive"> 
  <div class="indextable">
    <table class="table table-hover">  
      <thead>
        <tr>
          <th> Nombre </th>
          <th> Tipo </th>
          <th> Creador </th>
         
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @buildings.each do |building| %>
          <tr>
            <td><%= building.name.titleize %></td>
            <td><%= building.buildingtype.titleize%></td>
            <td><%= building.users[0].email.titleize%></td>
            
            <td><%= link_to 'Show', building %></td>
            <!-- Check if current user has any engagement with Admin role -->
            <% if building.engagements.where(user_id: current_user.id, access: 'admin').present? %> 
              <td><%= link_to 'Edit', edit_building_path(building) %></td>  
              <td><%= link_to 'Destroy', building, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% else %>
              <td></td>
              <td></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
<br>

<%= link_to 'Crear Ente Residencial', new_building_path, class: "mb-5" %>




